<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<!-- Meta -->
	<meta name="description" content="Best Bharatliv Admin Dashboards" />
	<meta name="author" content="Bootstrap Gallery" />
	<link rel="canonical" href="https://www.bootstrap.gallery/" />
	<meta property="og:url" content="https://www.bootstrap.gallery" />
	<meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery" />
	<meta property="og:description" content="Marketplace for Bharatliv Admin Dashboards" />
	<meta property="og:type" content="Website" />
	<meta property="og:site_name" content="Bootstrap Gallery" />
	<link rel="shortcut icon" href="assets/images/logo.png" />
	<link rel="stylesheet" href="./assets/css/toggle.css" />
	<!-- Font Awesome CDN link -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
	<!-- Title -->
	<title>Global Study Market Admin Dashboards</title>

	<!-- *************
			************ Common Css Files *************
		************ -->

	<!-- Animated css -->
	<link rel="stylesheet" href="assets/css/animate.css" />

	<!-- Bootstrap font icons css -->
	<link rel="stylesheet" href="assets/fonts/bootstrap/bootstrap-icons.css" />

	<!-- Main css -->
	<link rel="stylesheet" href="assets/css/main.min.css" />

	<!-- *************
			************ Vendor Css Files *************
		************ -->

	<!-- Scrollbar CSS -->
	<link rel="stylesheet" href="assets/vendor/overlay-scroll/OverlayScrollbars.min.css" />
</head>

<body>
	<!-- Loading wrapper start -->
	<!-- <div id="loading-wrapper">
			<div class="spinner">
                <div class="line1"></div>
				<div class="line2"></div>
				<div class="line3"></div>
				<div class="line4"></div>
				<div class="line5"></div>
				<div class="line6"></div>
            </div>
		</div> -->
	<!-- Loading wrapper end -->

	<!-- Page wrapper start -->
	<div class="page-wrapper">
		<!-- Sidebar wrapper start -->
		<nav class="sidebar-wrapper">
			<!-- Sidebar brand starts -->
			<div class="sidebar-brand">
				<a href="home.html" class="logo">
					<img src="assets/images/logo.png" alt="Admin Dashboards" />
				</a>
			</div>
			<!-- Sidebar brand starts -->

			<!-- Sidebar menu starts -->
			<div class="sidebar-menu">
				<div class="sidebarMenuScroll">
					<ul>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-house"></i>
								<span class="menu-text">Dashboards</span>
							</a>
							<!-- <div class="sidebar-submenu">
									<ul>
										<li>
											<a href="home.html" class="current-page">Analytics</a>
										</li>
										<li>
											<a href="reports.html">Reports</a>
										</li>
									</ul>
								</div> -->
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-building"></i>
								<span class="menu-text">Banners</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="banner.html">Our Banners</a>
									</li>
									<li>
										<a href="add-banner.html">Add Banners</a>
									</li>
									<!-- <li>
											<a href="products.html">Products</a>
										</li>
										<li>
											<a href="view-cart.html">Shopping Cart</a>
										</li>
										<li>
											<a href="checkout.html">Billing Details</a>
										</li>
										<li>
											<a href="customers.html">Customers</a>
										</li>
										
										<li>
											<a href="reviews.html">Reviews</a>
										</li> -->
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-megaphone"></i>
								<span class="menu-text">Team</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="team.html">Our Team</a>
									</li>
									<li>
										<a href="add-team.html">Add Team</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-grid"></i>
								<span class="menu-text">Services</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="services.html">Our Services</a>
									</li>
									<li>
										<a href="add-services.html">Add Services</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-grid"></i>
								<span class="menu-text">Countries</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="countries.html">Our Countries</a>
									</li>
									<li>
										<a href="add-countries.html">Add Countries</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown active">
							<a href="#">
								<i class="bi bi-grid"></i>
								<span class="menu-text">Gallery</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="gallery.html">Our Gallery</a>
									</li>
									<li>
										<a href="add-gallery.html">Add Gallery</a>
									</li>
								</ul>
							</div>
						</li>
                        <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-grid"></i>
								<span class="menu-text">Series Videos</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="series-video.html">Our Series Videos</a>
									</li>
									<li>
										<a href="add-series-video.html">Add Series Videos</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-grid"></i>
								<span class="menu-text">Audio S C</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="audio-sub-categories.html">Our Audio Sub-Categories</a>
									</li>
									<li>
										<a href="add-audio-sub-categories.html">Add Audio Sub-Categories</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-camera-video"></i>
								<span class="menu-text">Videos</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="videos.html">Our Videos</a>
									</li>
									<li>
										<a href="add-videos.html">Add Videos</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-music-note"></i>
								<span class="menu-text">Audio Files</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="audios.html">Our Audio Files</a>
									</li>
									<li>
										<a href="add-audios.html">Add Audio Files</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-translate"></i>
								<span class="menu-text">Languages</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="languages.html">Our Languages</a>
									</li>
									<li>
										<a href="add-languages.html">Add Languages</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-sticky"></i>
								<span class="menu-text">Banners</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="banners.html">Our Banners</a>
									</li>
									<li>
										<a href="add-banners.html">Add Banners</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-people"></i>
								<span class="menu-text">Customers</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="customers.html">Our Customers</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-people"></i>
								<span class="menu-text">Reels</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="reels.html">Customer Reels</a>
									</li>
								</ul>
							</div>
						</li>
						<!-- <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-gem"></i>
								<span class="menu-text">Widgets</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="widgets.html">Widgets</a>
									</li>
									<li>
										<a href="graph-widgets.html">Graph Widgets</a>
									</li>
								</ul>
							</div>
						</li> -->
						<!-- <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-collection"></i>
								<span class="menu-text">UI Elements</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="accordions.html">Accordions</a>
									</li>
									<li>
										<a href="alerts.html">Alerts</a>
									</li>
									<li>
										<a href="buttons.html">Buttons</a>
									</li>
									<li>
										<a href="badges.html">Badges</a>
									</li>
									<li>
										<a href="cards.html">Cards</a>
									</li>
									<li>
										<a href="carousel.html">Carousel</a>
									</li>
									<li>
										<a href="dropdowns.html">Dropdowns</a>
									</li>
									<li>
										<a href="icons.html">Icons</a>
									</li>
									<li>
										<a href="modals.html">Modals</a>
									</li>
									<li>
										<a href="offcanvas.html">Off Canvas</a>
									</li>
									<li>
										<a href="progress.html">Progress Bars</a>
									</li>
									<li>
										<a href="spinners.html">Spinners</a>
									</li>
									<li>
										<a href="tabs.html">Tabs</a>
									</li>
									<li>
										<a href="tooltips.html">Tooltips</a>
									</li>
									<li>
										<a href="typography.html">Typography</a>
									</li>
								</ul>
							</div>
						</li> -->
						<li class="sidebar-dropdown">
							<!-- <a href="#">
								<i class="bi bi-stickies"></i>
								<span class="menu-text">Pages</span>
							</a> -->
							<div class="sidebar-submenu">
								<ul>
									<li>
										<!-- <a href="profile.html">Profile</a> -->
									</li>
									<li>
										<!-- <a href="account-settings.html">Account Settings</a> -->
									</li>
								</ul>
							</div>
						</li>
						<!-- <li>
							<a href="calendar.html">
								<i class="bi bi-calendar4"></i>
								<span class="menu-text">Calendar</span>
							</a>
						</li> -->
						<!-- <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-columns-gap"></i>
								<span class="menu-text">Forms</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="form-inputs.html">Form Inputs</a>
									</li>
									<li>
										<a href="form-checkbox-radio.html">Checkbox &amp; Radio</a>
									</li>
									<li>
										<a href="form-file-input.html">File Input</a>
									</li>
									<li>
										<a href="form-validations.html">Validations</a>
									</li>
									<li>
										<a href="bs-select.html">Bootstrap Select</a>
									</li>
									<li>
										<a href="date-time-pickers.html">Date Time Pickers</a>
									</li>
									<li>
										<a href="input-mask.html">Input Masks</a>
									</li>
									<li>
										<a href="editor.html">Editor</a>
									</li>
									<li>
										<a href="form-layout1.html">Form Layout</a>
									</li>
									<li>
										<a href="form-layout2.html">Form Layout 2</a>
									</li>
									<li>
										<a href="form-layout3.html">Form Layout 3</a>
									</li>
									<li>
										<a href="form-layout4.html">Form Horizontal</a>
									</li>
								</ul>
							</div>
						</li> -->
						<!-- <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-window-split"></i>
								<span class="menu-text">Tables</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="tables.html">Tables</a>
									</li>
									<li>
										<a href="data-tables.html">Data Tables</a>
									</li>
								</ul>
							</div>
						</li> -->
						<!-- <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-pie-chart"></i>
								<span class="menu-text">Graphs &amp; Maps</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="apex.html">Apex</a>
									</li>
									<li>
										<a href="morris.html">Morris</a>
									</li>
									<li>
										<a href="maps.html">Maps</a>
									</li>
								</ul>
							</div>
						</li> -->
						<!-- <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-layout-sidebar"></i>
								<span class="menu-text">Layouts</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="layout.html">Default Layout</a>
									</li>
									<li>
										<a href="layout-grid.html">Grid Layout</a>
									</li>
									<li>
										<a href="layout-welcome.html">Welcome Layout</a>
									</li>
								</ul>
							</div>
						</li> -->
						<!-- <li class="sidebar-dropdown">
							<a href="#">
								<i class="bi bi-x-diamond"></i>
								<span class="menu-text">Authentication</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li>
										<a href="login.html">Login</a>
									</li>
									<li>
										<a href="signup.html">Signup</a>
									</li>
									<li>
										<a href="error.html">Error</a>
									</li>
									<li>
										<a href="maintenance.html">Maintenance</a>
									</li>
								</ul>
							</div>
						</li> -->
						<!-- <li>
							<a href="starter-page.html">
								<i class="bi bi-hand-index-thumb"></i>
								<span class="menu-text">Link</span>
							</a>
						</li> -->
					</ul>
				</div>
			</div>
			<!-- Sidebar menu ends -->
		</nav>
		<!-- Sidebar wrapper end -->

		<!-- *************
				************ Main container start *************
			************* -->
		<div class="main-container">
			<!-- Page header starts -->
			<div class="page-header">
				<div class="toggle-sidebar" id="toggle-sidebar">
					<i class="bi bi-list"></i>
				</div>

				<!-- Breadcrumb start -->
				<ol class="breadcrumb d-md-flex d-none">
					<li class="breadcrumb-item">
						<i class="bi bi-house"></i>
						<a href="home.html">Home</a>
					</li>
					<li class="breadcrumb-item">Series</li>
					<!-- <li class="breadcrumb-item breadcrumb-active" aria-current="page">Orders</li> -->
				</ol>
				<!-- Breadcrumb end -->

				<!-- Header actions ccontainer start -->
				<div class="header-actions-container">
					<!-- Search container start -->
					<div class="search-container">
						<!-- Search input group start -->
						<!-- <div class="input-group">
								<input type="text" class="form-control" placeholder="Search anything">
								<button class="btn" type="button">
									<i class="bi bi-search"></i>
								</button>
							</div> -->
						<!-- Search input group end -->
					</div>
					<!-- Search container end -->

					<!-- Leads start -->
					<!-- <a href="orders.html" class="leads d-none d-xl-flex">
							<div class="lead-details">You have <span class="count"> 21 </span> new leads </div>
							<span class="lead-icon"><i
									class="bi bi-bell-fill animate__animated animate__swing animate__infinite infinite"></i><b
									class="dot animate__animated animate__heartBeat animate__infinite"></b></span>
						</a> -->
					<!-- Leads end -->

					<!-- Header actions start -->
					<ul class="header-actions">
						<!-- <li class="dropdown d-none d-md-block">
								<a href="#" id="countries" data-toggle="dropdown" aria-haspopup="true">
									<img src="assets/images/flags/1x1/br.svg" class="flag-img" alt="Admin Panels" />
								</a>
								<div class="dropdown-menu dropdown-menu-end mini" aria-labelledby="countries">
									<div class="country-container">
										<a href="home.html">
											<img src="assets/images/flags/1x1/us.svg" alt="Clean Admin Dashboards" />
										</a>
										<a href="home.html">
											<img src="assets/images/flags/1x1/in.svg" alt="Google Dashboards" />
										</a>
										<a href="home.html">
											<img src="assets/images/flags/1x1/gb.svg" alt="AI Admin Dashboards" />
										</a>
										<a href="home.html">
											<img src="assets/images/flags/1x1/tr.svg" alt="Modern Dashboards" />
										</a>
										<a href="home.html">
											<img src="assets/images/flags/1x1/ca.svg" alt="Best Admin Dashboards" />
										</a>
									</div>
								</div>
							</li> -->
						<li class="dropdown">
							<a href="#" id="userSettings" class="user-settings" data-toggle="dropdown"
								aria-haspopup="true">
								<span class="user-name d-none d-md-block"></span>
								<span class="avatar">
									<img src="assets/images/image.png" alt="Admin Templates" />
									<span class="status online"></span>
								</span>
							</a>
							<div class="dropdown-menu dropdown-menu-end" aria-labelledby="userSettings">
								<div class="header-profile-actions">
									<!-- <a href="profile.html">Profile</a> -->
									<!-- <a href="account-settings.html">Settings</a> -->
									<a id="logoutButton">Logout</a>
								</div>
							</div>
						</li>
					</ul>
					<!-- Header actions end -->
				</div>
				<!-- Header actions ccontainer end -->
			</div>
			<!-- Page header ends -->

			<!-- Content wrapper scroll start -->
			<div class="content-wrapper-scroll">
				<!-- Content wrapper start -->
				<div class="content-wrapper">
					<!-- Modal Structure -->
					<div id="editModal" class="modal">
						<style>
							/* Modal Styles */
							.modal {
								display: none;
								position: fixed;
								z-index: 1000;
								left: 0;
								top: 0;
								width: 100%;
								height: 100%;
								overflow: auto;
								background-color: rgba(0, 0, 0, 0.5);
								animation: slideIn 0.3s forwards; /* Animation */
							}
					
							@keyframes slideIn {
								from {
									transform: translateY(100%);
								}
								to {
									transform: translateY(0);
								}
							}
					
							.modal-content {
								background-color: #fefefe;
								margin: 15% auto;
								padding: 20px;
								border-radius: 10px; /* Rounded corners */
								box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Subtle shadow */
								width: 30%;
								transition: transform 0.3s ease; /* Smooth transition */
							}
					
							.close {
								color: #aaa;
								float: right;
								font-size: 28px;
								font-weight: bold;
							}
					
							.close:hover,
							.close:focus {
								color: black;
								text-decoration: none;
								cursor: pointer;
							}
					
							/* Image Preview Styles */
							.image-preview {
								margin: 10px 0;
								display: flex;
								align-items: center;
								justify-content: center;
								border: 2px dashed #007bff; /* Dashed border */
								border-radius: 10px; /* Rounded corners */
								padding: 20px;
								background-color: #f9f9f9; /* Light background */
							}
					
							.image-preview img {
								max-width: 100%; /* Responsive */
								max-height: 200px; /* Set max height */
								border-radius: 10px; /* Rounded corners */
							}

							@media screen and (max-width: 600px){
								.modal-content {
								background-color: #fefefe;
								margin: 15% auto;
								padding: 20px;
								border-radius: 10px; /* Rounded corners */
								box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Subtle shadow */
								width: 80%;
								transition: transform 0.3s ease; /* Smooth transition */
							}
							}
						</style>
						<div class="modal-content">
							<span class="close" onclick="closeEditModal()">&times;</span>
							<h2>Edit Speaker</h2>
							<form id="editSpeakerForm" enctype="multipart/form-data">
								<input type="hidden" id="speakerId" />
								<label for="title">Title:</label>
								<input type="text" id="title" required />
								<br>
					
								<label for="image">Image:</label>
								<input type="file" id="image" accept="image/*" onchange="previewImage(event)" />
								
								<!-- Image Preview Container -->
								<div class="image-preview" id="imagePreviewContainer">
									<img id="imagePreview" src="" alt="Image Preview" style="display:none;" />
								</div>
								
								<button type="submit" class="btn btn-primary">
									Save Changes
								</button>
							</form>
						</div>
					</div>
					
					<script>
						// Function to preview image
						function previewImage(event) {
							const imagePreviewContainer = document.getElementById("imagePreviewContainer");
							const imagePreview = document.getElementById("imagePreview");
							const file = event.target.files[0];
					
							if (file) {
								const reader = new FileReader();
								reader.onload = function (e) {
									imagePreview.src = e.target.result;
									imagePreview.style.display = "block"; // Show image
								};
								reader.readAsDataURL(file);
							} else {
								imagePreview.src = "";
								imagePreview.style.display = "none"; // Hide image
							}
						}
					</script>
					

					<!-- Row start -->
					<div class="row">
						<div class="col-sm-12 col-12">
							<div class="card">
								<div class="card-header">
									<div class="card-title">Series History</div>
								</div>
								<div class="card-body">
									<div class="table-responsive">
										<table class="table v-middle">
											<thead>
												<tr>
													<th>Series Name</th>
													<th>Photo</th>
													<th>Status</th>
													<th>Organization Name</th>
													<th>Speaker Name</th>
													<th>Actions</th>
												</tr>
											</thead>
											<tbody id="tbodyOrganization">
												<!-- Get the data from API's -->
											</tbody>
										</table>

										<script>
											async function fetchOrganizations() {
												try {
													const response = await fetch("/api/organizations");
													const data = await response.json();
													const organizationSelect =
														document.getElementById("organizationID");

													// Clear existing options
													organizationSelect.innerHTML = "";

													// Populate dropdown with organizations
													data.data.forEach((org) => {
														const option = document.createElement("option");
														option.value = org.id; // Assuming 'id' is the unique identifier
														option.textContent = org.title; // Assuming 'title' is the name to display
														organizationSelect.appendChild(option);
													});
												} catch (error) {
													console.error(
														"Error fetching organizations:",
														error
													);
												}
											}

											function fetchSpeakers() {
												fetch("/api/series")
													.then((res) => res.json())
													.then((data) => {
                                                        if(data.data.length == 0){
                                                            document.getElementById("tbodyOrganization").innerHTML = `<td>No Series Found!</td>`
                                                        }
														let tbodyOrganization =
															document.getElementById("tbodyOrganization");

														data.data.forEach((item) => {
															let tr = document.createElement("tr");
															tr.innerHTML = `
																<td>
																	<div class="media-box">
																		<div class="media-box-body">
																			<div class="text-truncate">${item.title}</div>
																		</div>
																	</div>
																</td>
																<td>
																	<div class="media-box">
																		<img src=${item.image} class="media-avatar" alt="Admin Themes">    
																	</div>
																</td>
																<td>
																	<label class="switch">
																		<input type="checkbox" ${item.status ? "checked" : ""} class="status-toggle">
																		<span class="slider"></span>
																	</label>
																</td>
																<td>${item.organization.title}</td>
																<td>${item.speaker.title}</td>
																<td>
																	<!-- Edit Button -->
																	<button class="btn btn-edit btn-sm" onclick="openEditModal(${item.id}, '${item.title
																}', '${item.organizationID}')">
																		<i class="fas fa-edit"></i>
																	</button>
																	<button class="btn btn-danger btn-sm" onclick="deleteSpeaker(${item.id})">
																		<i class="fas fa-trash"></i>
																	</button>
																</td>`;

															tbodyOrganization.append(tr);

															// Add event listener for the toggle
															let toggleSwitch =
																tr.querySelector(".status-toggle");
															toggleSwitch.addEventListener(
																"change",
																function () {
																	fetch(
																		`/api/series/change-status/${item.id}`,
																		{
																			method: "POST",
																		}
																	)
																		.then((res) => res.json())
																		.then((data) => {
																			console.log(data);
																		});
																	// Handle toggle change logic
																	let newStatus = this.checked;
																	console.log(
																		`Organization ID: ${item.id}, New Status: ${newStatus}`
																	);
																}
															);
														});
													});
											}

											function deleteSpeaker(id) {
												fetch(`/api/series/delete-series/${id}`, {
													method: "DELETE",
												})
													.then((res) => res.json())
													.then((data) => {
														if (data.status) {
															let tbodyOrganization =
																document.getElementById("tbodyOrganization");
															tbodyOrganization.innerHTML = "";
															fetchSpeakers();
														} else {
															alert("Error faced while deleting categories.");
														}
													});
											}

											// Function to open the modal
											function openEditModal(id, title, organizationID) {
												document.getElementById("editModal").style.display =
													"block";
												document.getElementById("speakerId").value = id;
												document.getElementById("title").value = title;
												document.getElementById("organizationID").value =
													organizationID; // Set selected organization
												fetchOrganizations(); // Populate organizations
											}

											// Function to close the modal
											function closeEditModal() {
												document.getElementById("editModal").style.display =
													"none";
											}

											// Handle form submission
											document
												.getElementById("editSpeakerForm")
												.addEventListener("submit", async function (event) {
													event.preventDefault();

													const id =
														document.getElementById("speakerId").value;
													const title =
														document.getElementById("title").value;
													
													const image =
														document.getElementById("image").files[0]; // Get the selected file

													const formData = new FormData();
													formData.append("title", title);
													if (image) {
														formData.append("image", image); // Append the image file
													}

													// Log the form data contents for debugging
													formData.forEach((value, key) => {
														console.log(`${key}:`, value);
													});
													try {
														const response = await fetch(
															`/api/series/edit-series/${id}`,
															{
																method: "POST",
																body: formData, // Send form data with file
															}
														);

														const data = await response.json();
														if (data.status) {
															console.log(data);

															// Refresh the page or update the UI accordingly
															window.location.reload();
														} else {
															alert(data.message); // Display error message
														}
													} catch (error) {
														console.error("Error:", error);
														alert(
															"An error occurred while updating the speaker."
														);
													}

													closeEditModal(); // Close the modal after submission
												});

											document.addEventListener("DOMContentLoaded", () => {
												fetchSpeakers();
											});
										</script>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Row end -->
				</div>

				<!-- Content wrapper end -->

				<!-- App Footer start -->
				<div class="app-footer">
					<span>Â© Web Techmedia</span>
				</div>
				<!-- App footer end -->
			</div>
			<!-- Content wrapper scroll end -->
		</div>
		<!-- *************
				************ Main container end *************
			************* -->
	</div>
	<!-- Page wrapper end -->

	<!-- *************
			************ Required JavaScript Files *************
		************* -->
	<!-- Required jQuery first, then Bootstrap Bundle JS -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/bootstrap.bundle.min.js"></script>
	<script src="assets/js/modernizr.js"></script>
	<script src="assets/js/moment.js"></script>

	<!-- *************
			************ Vendor Js Files *************
		************* -->

	<!-- Overlay Scroll JS -->
	<script src="assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
	<script src="assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

	<!-- Main Js Required -->
	<script src="assets/js/main.js"></script>
	<script src="assets/js/isToken.js"></script>
</body>

</html>